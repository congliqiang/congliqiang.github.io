---
title: REDIS主从复制
date: 2022-01-18 18:42:23
tags: [redis]
top_img: /img/redis1.jpg
cover: /img/redis1.jpg
swiper_index: 1 #置顶轮播图顺序，非负整数，数字越大越靠前
---
![](/img/redis1.jpg)
# 一、主从复制说明
## 1.1 面临问题
在实际的场景中单一节点的redis容易面临风险。
比如：
* 机器故障：我们部署一台Redis服务器，当发生机器故障时，需要迁移到另一台服务器并且要保证数据是同步的。而数据是最重要的，如果你不在乎，基本就不会使用Redis了。

要实现分布式数据库的更大的存储容量和承受高并发访问量，我们会将原来集中式数据库的数据分别存储到其他多个网络节点上。
Redis为了解决这个单一节点的问题，也会把数据复制多个副本部署到其他节点上进行复制，实现Redis的高可用，实现对数据的冗余备份，从而保证数据和服务的高可用。
## 1.2 什么是主从复制
主从复制，是指将一台Redis服务器的数据，复制到其他的Redis服务器，前者称为主节点(master)，后者称为从节点(slave)，数据的复制是单向的，只能由主节点到从节点。
默认情况下，每台Redis服务器都是主节点，且一个主节点可以有多个从节点（或没有从节点）,但一个从节点只能有一个主节点。
![](/img/redis2.jpg)
# 二、主从复制的作用
## 1. 数据冗余
主从复制实现了数据的热备份，是持久化之外的一种数据冗余方式。
## 2. 故障恢复
当主节点出现问题时，可以由从节点提供服务，实现快速的故障恢复；实际上是一种服务的冗余。
## 3. 负载均衡
在主从复制的基础上，配合读写分离，可以由主节点提供写服务，从节点提供读服务(即写Redis数据时应用连接主节点，读Redis数据分担服务器负载；尤其是在写少读多的场景下，
通过多个从节点分担读负载，可以大大提高Redis服务器的并发量)。
## 4. 读写分离
可以用于实现读写分离，主库写，从库读，读写分离不仅可以提高服务器的负载能力，同时可以根据需求的变化，改变从库的数量；
## 5. 高可用基石
除了上述作用外，主从复制还是哨兵和集群都能够实施的基础，因此说主从复制时Redis高可用的基础。
# 三、主从复制启用
从节点开启主从复制，有三种方式
## 1. 配置文件
在从服务器的配置文件中加入:```slave <masterip> <masterport>```
3. 启动命令
4. 客户端命令
5. 
